(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var COMPILED=false;var goog=goog||{};goog.global=this||self;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;
goog.exportPath_=function(name,object,overwriteImplicit,objectToExportTo){var parts=name.split(".");var cur=objectToExportTo||goog.global;if(!(parts[0]in cur)&&typeof cur.execScript!="undefined")cur.execScript("var "+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&object!==undefined)if(!overwriteImplicit&&goog.isObject(object)&&goog.isObject(cur[part]))for(var prop in object){if(object.hasOwnProperty(prop))cur[part][prop]=object[prop]}else cur[part]=object;else if(cur[part]&&
cur[part]!==Object.prototype[part])cur=cur[part];else cur=cur[part]={}};
goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED){var uncompiledDefines=goog.global.CLOSURE_UNCOMPILED_DEFINES;var defines=goog.global.CLOSURE_DEFINES;if(uncompiledDefines&&uncompiledDefines.nodeType===undefined&&Object.prototype.hasOwnProperty.call(uncompiledDefines,name))value=uncompiledDefines[name];else if(defines&&defines.nodeType===undefined&&Object.prototype.hasOwnProperty.call(defines,name))value=defines[name]}return value};
goog.FEATURESET_YEAR=goog.define("goog.FEATURESET_YEAR",2012);goog.DEBUG=goog.define("goog.DEBUG",true);goog.LOCALE=goog.define("goog.LOCALE","en");goog.TRUSTED_SITE=goog.define("goog.TRUSTED_SITE",true);goog.DISALLOW_TEST_ONLY_CODE=goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",false);
goog.provide=function(name){if(goog.isInModuleLoader_())throw new Error("goog.provide cannot be used within a module.");if(!COMPILED)if(goog.isProvided_(name))throw new Error('Namespace "'+name+'" already declared.');goog.constructNamespace_(name)};
goog.constructNamespace_=function(name,object,overwriteImplicit){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf("."))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,object,overwriteImplicit)};
goog.getScriptNonce=function(opt_window){if(opt_window&&opt_window!=goog.global)return goog.getScriptNonce_(opt_window.document);if(goog.cspNonce_===null)goog.cspNonce_=goog.getScriptNonce_(goog.global.document);return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(doc){var script=doc.querySelector&&doc.querySelector("script[nonce]");if(script){var nonce=script["nonce"]||script.getAttribute("nonce");if(nonce&&goog.NONCE_PATTERN_.test(nonce))return nonce}return""};
goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(name){if(typeof name!=="string"||!name||name.search(goog.VALID_MODULE_RE_)==-1)throw new Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw new Error("Module "+name+" has been loaded incorrectly. Note, "+"modules cannot be loaded as normal scripts. They require some kind of "+"pre-processing step. You're likely trying to load a module via a "+"script tag or as a part of a concatenated bundle without rewriting the "+"module. For more info see: "+"https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");
if(goog.moduleLoaderState_.moduleName)throw new Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name))throw new Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name]}};goog.module.get=function(name){return goog.module.getInternal_(name)};
goog.module.getInternal_=function(name){if(!COMPILED)if(name in goog.loadedModules_)return goog.loadedModules_[name].exports;else if(!goog.implicitNamespaces_[name]){var ns=goog.getObjectByName(name);return ns!=null?ns:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};
goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){var inLoader=!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6;if(inLoader)return true;var jscomp=goog.global["$jscomp"];if(jscomp){if(typeof jscomp.getCurrentModulePath!="function")return false;return!!jscomp.getCurrentModulePath()}return false};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from "+"within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw new Error("goog.module must be called prior to "+"goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=true};
goog.declareModuleId=function(namespace){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw new Error("goog.declareModuleId may only be called from "+"within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw new Error("goog.declareModuleId may only be called once per module.");if(namespace in goog.loadedModules_)throw new Error('Module with namespace "'+namespace+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=namespace;else{var jscomp=
goog.global["$jscomp"];if(!jscomp||typeof jscomp.getCurrentModulePath!="function")throw new Error('Module with namespace "'+namespace+'" has been loaded incorrectly.');var exports=jscomp.require(jscomp.getCurrentModulePath());goog.loadedModules_[namespace]={exports:exports,type:goog.ModuleType.ES6,moduleId:namespace}}};
goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||"";throw new Error("Importing test-only code into non-debug environment"+(opt_message?": "+opt_message:"."));}};goog.forwardDeclare=function(name){};goog.forwardDeclare("Document");goog.forwardDeclare("HTMLScriptElement");goog.forwardDeclare("XMLHttpRequest");
if(!COMPILED){goog.isProvided_=function(name){return name in goog.loadedModules_||!goog.implicitNamespaces_[name]&&goog.getObjectByName(name)!=null};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(name,opt_obj){var parts=name.split(".");var cur=opt_obj||goog.global;for(var i=0;i<parts.length;i++){cur=cur[parts[i]];if(cur==null)return null}return cur};
goog.addDependency=function(relPath,provides,requires,opt_loadFlags){if(!COMPILED&&goog.DEPENDENCIES_ENABLED)goog.debugLoader_.addDependency(relPath,provides,requires,opt_loadFlags)};goog.ENABLE_DEBUG_LOADER=goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(msg){if(goog.global.console)goog.global.console["error"](msg)};
goog.require=function(namespace){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER)goog.debugLoader_.requested(namespace);if(goog.isProvided_(namespace)){if(goog.isInModuleLoader_())return goog.module.getInternal_(namespace)}else if(goog.ENABLE_DEBUG_LOADER){var moduleLoaderState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(namespace)}finally{goog.moduleLoaderState_=moduleLoaderState}}return null}};goog.requireType=function(namespace){return{}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;
goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw new Error("unimplemented abstract method");};goog.addSingletonGetter=function(ctor){ctor.instance_=undefined;ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];
goog.LOAD_MODULE_USING_EVAL=goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.SEAL_MODULE_EXPORTS=goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE=goog.define("goog.TRANSPILE","detect");goog.ASSUME_ES_MODULES_TRANSPILED=goog.define("goog.ASSUME_ES_MODULES_TRANSPILED",false);goog.TRANSPILE_TO_LANGUAGE=goog.define("goog.TRANSPILE_TO_LANGUAGE","");goog.TRANSPILER=goog.define("goog.TRANSPILER","transpile.js");
goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){var hasBadLetScoping;try{hasBadLetScoping=!eval('"use strict";'+"let x = 1; function f() { return typeof x; };"+'f() == "number";')}catch(e){hasBadLetScoping=false}goog.hasBadLetScoping=hasBadLetScoping}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(moduleDef){return"(function(){"+moduleDef+"\n"+";"+"})();\n"};
goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:false,type:goog.ModuleType.GOOG};var origExports={};var exports=origExports;if(goog.isFunction(moduleDef))exports=moduleDef.call(undefined,exports);else if(typeof moduleDef==="string"){if(goog.useSafari10Workaround())moduleDef=goog.workaroundSafari10EvalBug(moduleDef);exports=goog.loadModuleFromSource_.call(undefined,exports,moduleDef)}else throw new Error("Invalid module definition");
var moduleName=goog.moduleLoaderState_.moduleName;if(typeof moduleName==="string"&&moduleName){if(goog.moduleLoaderState_.declareLegacyNamespace){var isDefaultExport=origExports!==exports;goog.constructNamespace_(moduleName,exports,isDefaultExport)}else if(goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof exports=="object"&&exports!=null)Object.seal(exports);var data={exports:exports,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};goog.loadedModules_[moduleName]=data}else throw new Error('Invalid module name "'+
moduleName+'"');}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=function(exports){eval(arguments[1]);return exports};goog.normalizePath_=function(path){var components=path.split("/");var i=0;while(i<components.length)if(components[i]==".")components.splice(i,1);else if(i&&components[i]==".."&&components[i-1]&&components[i-1]!="..")components.splice(--i,2);else i++;return components.join("/")};goog.global.CLOSURE_LOAD_FILE_SYNC;
goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(src);else try{var xhr=new goog.global["XMLHttpRequest"];xhr.open("get",src,false);xhr.send();return xhr.status==0||xhr.status==200?xhr.responseText:null}catch(err){return null}};
goog.transpile_=function(code,path,target){var jscomp=goog.global["$jscomp"];if(!jscomp)goog.global["$jscomp"]=jscomp={};var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER;var transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){(function(){(0,eval)(transpilerCode+"\n//# sourceURL="+transpilerPath)}).call(goog.global);if(goog.global["$gwtExport"]&&goog.global["$gwtExport"]["$jscomp"]&&!goog.global["$gwtExport"]["$jscomp"]["transpile"])throw new Error('The transpiler did not properly export the "transpile" '+
"method. $gwtExport: "+JSON.stringify(goog.global["$gwtExport"]));goog.global["$jscomp"].transpile=goog.global["$gwtExport"]["$jscomp"]["transpile"];jscomp=goog.global["$jscomp"];transpile=jscomp.transpile}}if(!transpile){var suffix=" requires transpilation but no transpiler was found.";transpile=jscomp.transpile=function(code,path){goog.logToConsole_(path+suffix);return code}}return transpile(code,path,target)};
goog.typeOf=function(value){var s=typeof value;if(s!="object")return s;if(!value)return"null";if(Array.isArray(value))return"array";return s};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=="array"||type=="object"&&typeof val.length=="number"};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=="function"};goog.isFunction=function(val){return goog.typeOf(val)=="function"};
goog.isObject=function(val){var type=typeof val;return type=="object"&&val!=null||type=="function"};goog.getUid=function(obj){return Object.prototype.hasOwnProperty.call(obj,goog.UID_PROPERTY_)&&obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return!!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if(obj!==null&&"removeAttribute"in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};
goog.UID_PROPERTY_="closure_uid_"+(Math.random()*1E9>>>0);goog.uidCounter_=0;goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(typeof obj.clone==="function")return obj.clone();var clone=type=="array"?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return fn.call.apply(fn.bind,arguments)};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};
goog.now=Date.now;goog.globalEval=function(script){(0,eval)(script)};goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.global.CLOSURE_CSS_NAME_MAP_FN;
goog.getCssName=function(className,opt_modifier){if(String(className).charAt(0)==".")throw new Error('className passed in goog.getCssName must not start with ".".'+" You passed: "+className);var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split("-");var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join("-")};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_==
"BY_WHOLE"?getMapping:renameByParts;else rename=function(a){return a};var result=opt_modifier?className+"-"+rename(opt_modifier):rename(className);if(goog.global.CLOSURE_CSS_NAME_MAP_FN)return goog.global.CLOSURE_CSS_NAME_MAP_FN(result);return result};goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;
goog.getMsg=function(str,opt_values,opt_options){if(opt_options&&opt_options.html)str=str.replace(/</g,"&lt;");if(opt_values)str=str.replace(/\{\$([^}]+)}/g,function(match,key){return opt_values!=null&&key in opt_values?opt_values[key]:match});return str};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(publicPath,object,objectToExportTo){goog.exportPath_(publicPath,object,true,objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];return parentCtor.prototype[methodName].apply(me,args)}};
goog.scope=function(fn){if(goog.isInModuleLoader_())throw new Error("goog.scope is not supported within a module.");fn.call(goog.global)};if(!COMPILED)goog.global["COMPILED"]=COMPILED;
goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor)constructor=function(){throw new Error("cannot instantiate an interface (no constructor defined).");};var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass)goog.inherits(cls,superClass);delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null)if(statics instanceof
Function)statics(cls);else goog.defineClass.applyProperties_(cls,statics);return cls};goog.defineClass.ClassDescriptor;goog.defineClass.SEAL_CLASS_INSTANCES=goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return ctr;var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];return instance};return wrappedCtr};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(target,source){var key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key];for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}};
if(!COMPILED&&goog.DEPENDENCIES_ENABLED){goog.inHtmlDocument_=function(){var doc=goog.global.document;return doc!=null&&"write"in doc};goog.isDocumentLoading_=function(){var doc=goog.global.document;return doc.attachEvent?doc.readyState!="complete":doc.readyState=="loading"};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH!=undefined&&typeof goog.global.CLOSURE_BASE_PATH==="string"){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;
var currentScript=doc.currentScript;if(currentScript)var scripts=[currentScript];else var scripts=doc.getElementsByTagName("SCRIPT");for(var i=scripts.length-1;i>=0;--i){var script=scripts[i];var src=script.src;var qmark=src.lastIndexOf("?");var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=="base.js"){goog.basePath=src.substr(0,l-7);return}}};goog.findBasePath_();goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE};goog.Transpiler.prototype.createRequiresTranspilation_=
function(){var transpilationTarget="es3";var requiresTranspilation={"es3":false};var transpilationRequiredForAllLaterModes=false;function addNewerLanguageTranspilationCheck(modeName,isSupported){if(transpilationRequiredForAllLaterModes)requiresTranspilation[modeName]=true;else if(isSupported()){transpilationTarget=modeName;requiresTranspilation[modeName]=false}else{requiresTranspilation[modeName]=true;transpilationRequiredForAllLaterModes=true}}function evalCheck(code){try{return!!eval(code)}catch(ignored){return false}}
var userAgent=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";addNewerLanguageTranspilationCheck("es5",function(){return evalCheck("[1,].length==1")});addNewerLanguageTranspilationCheck("es6",function(){var re=/Edge\/(\d+)(\.\d)*/i;var edgeUserAgent=userAgent.match(re);if(edgeUserAgent)return false;var es6fullTest="class X{constructor(){if(new.target!=String)throw 1;this.x=42}}"+"let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof "+"String))throw 1;for(const a of[2,3]){if(a==2)continue;function "+
"f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()"+"==3}";return evalCheck('(()=>{"use strict";'+es6fullTest+"})()")});addNewerLanguageTranspilationCheck("es7",function(){return evalCheck("2 ** 2 == 4")});addNewerLanguageTranspilationCheck("es8",function(){return evalCheck("async () => 1, true")});addNewerLanguageTranspilationCheck("es9",function(){return evalCheck("({...rest} = {}), true")});addNewerLanguageTranspilationCheck("es_next",function(){return false});return{target:transpilationTarget,
map:requiresTranspilation}};goog.Transpiler.prototype.needsTranspile=function(lang,module){if(goog.TRANSPILE=="always")return true;else if(goog.TRANSPILE=="never")return false;else if(!this.requiresTranspilation_){var obj=this.createRequiresTranspilation_();this.requiresTranspilation_=obj.map;this.transpilationTarget_=this.transpilationTarget_||obj.target}if(lang in this.requiresTranspilation_)if(this.requiresTranspilation_[lang])return true;else if(goog.inHtmlDocument_()&&module=="es6"&&!("noModule"in
goog.global.document.createElement("script")))return true;else return false;else throw new Error("Unknown language mode: "+lang);};goog.Transpiler.prototype.transpile=function(code,path){return goog.transpile_(code,path,this.transpilationTarget_)};goog.transpiler_=new goog.Transpiler;goog.protectScriptTag_=function(str){return str.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")};goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=
false;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]};goog.DebugLoader_.prototype.bootstrap=function(namespaces,callback){var cb=callback;function resolve(){if(cb){goog.global.setTimeout(cb,0);cb=null}}if(!namespaces.length){resolve();return}var deps=[];for(var i=0;i<namespaces.length;i++){var path=this.getPathFromDeps_(namespaces[i]);if(!path)throw new Error("Unregonized namespace: "+namespaces[i]);deps.push(this.dependencies_[path])}var require=
goog.require;var loaded=0;for(var i=0;i<namespaces.length;i++){require(namespaces[i]);deps[i].onLoad(function(){if(++loaded==namespaces.length)resolve()})}};goog.DebugLoader_.prototype.loadClosureDeps=function(){var relPath="deps.js";this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+relPath),relPath,[],[],{},false));this.loadDeps_()};goog.DebugLoader_.prototype.requested=function(absPathOrId,opt_force){var path=this.getPathFromDeps_(absPathOrId);if(path&&(opt_force||
this.areDepsLoaded_(this.dependencies_[path].requires))){var callback=this.deferredCallbacks_[path];if(callback){delete this.deferredCallbacks_[path];callback()}}};goog.DebugLoader_.prototype.setDependencyFactory=function(factory){this.factory_=factory};goog.DebugLoader_.prototype.load_=function(namespace){if(!this.getPathFromDeps_(namespace)){var errorMessage="goog.require could not find: "+namespace;goog.logToConsole_(errorMessage);throw Error(errorMessage);}else{var loader=this;var deps=[];var visit=
function(namespace){var path=loader.getPathFromDeps_(namespace);if(!path)throw new Error("Bad dependency path or symbol: "+namespace);if(loader.written_[path])return;loader.written_[path]=true;var dep=loader.dependencies_[path];for(var i=0;i<dep.requires.length;i++)if(!goog.isProvided_(dep.requires[i]))visit(dep.requires[i]);deps.push(dep)};visit(namespace);var wasLoading=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(deps);if(!this.paused_&&!wasLoading)this.loadDeps_()}};goog.DebugLoader_.prototype.loadDeps_=
function(){var loader=this;var paused=this.paused_;while(this.depsToLoad_.length&&!paused)(function(){var loadCallDone=false;var dep=loader.depsToLoad_.shift();var loaded=false;loader.loading_(dep);var controller={pause:function(){if(loadCallDone)throw new Error("Cannot call pause after the call to load.");else paused=true},resume:function(){if(loadCallDone)loader.resume_();else paused=false},loaded:function(){if(loaded)throw new Error("Double call to loaded.");loaded=true;loader.loaded_(dep)},pending:function(){var pending=
[];for(var i=0;i<loader.loadingDeps_.length;i++)pending.push(loader.loadingDeps_[i]);return pending},setModuleState:function(type){goog.moduleLoaderState_={type:type,moduleName:"",declareLegacyNamespace:false}},registerEs6ModuleExports:function(path,exports,opt_closureNamespace){if(opt_closureNamespace)goog.loadedModules_[opt_closureNamespace]={exports:exports,type:goog.ModuleType.ES6,moduleId:opt_closureNamespace||""}},registerGoogModuleExports:function(moduleId,exports){goog.loadedModules_[moduleId]=
{exports:exports,type:goog.ModuleType.GOOG,moduleId:moduleId}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(callback){if(loadCallDone)throw new Error("Cannot register with defer after the call to load.");loader.defer_(dep,callback)},areDepsLoaded:function(){return loader.areDepsLoaded_(dep.requires)}};try{dep.load(controller)}finally{loadCallDone=true}})();if(paused)this.pause_()};goog.DebugLoader_.prototype.pause_=function(){this.paused_=true};goog.DebugLoader_.prototype.resume_=
function(){if(this.paused_){this.paused_=false;this.loadDeps_()}};goog.DebugLoader_.prototype.loading_=function(dep){this.loadingDeps_.push(dep)};goog.DebugLoader_.prototype.loaded_=function(dep){for(var i=0;i<this.loadingDeps_.length;i++)if(this.loadingDeps_[i]==dep){this.loadingDeps_.splice(i,1);break}for(var i=0;i<this.deferredQueue_.length;i++)if(this.deferredQueue_[i]==dep.path){this.deferredQueue_.splice(i,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)while(this.deferredQueue_.length)this.requested(this.deferredQueue_.shift(),
true);dep.loaded()};goog.DebugLoader_.prototype.areDepsLoaded_=function(pathsOrIds){for(var i=0;i<pathsOrIds.length;i++){var path=this.getPathFromDeps_(pathsOrIds[i]);if(!path||!(path in this.deferredCallbacks_)&&!goog.isProvided_(pathsOrIds[i]))return false}return true};goog.DebugLoader_.prototype.getPathFromDeps_=function(absPathOrId){if(absPathOrId in this.idToPath_)return this.idToPath_[absPathOrId];else if(absPathOrId in this.dependencies_)return absPathOrId;else return null};goog.DebugLoader_.prototype.defer_=
function(dependency,callback){this.deferredCallbacks_[dependency.path]=callback;this.deferredQueue_.push(dependency.path)};goog.LoadController=function(){};goog.LoadController.prototype.pause=function(){};goog.LoadController.prototype.resume=function(){};goog.LoadController.prototype.loaded=function(){};goog.LoadController.prototype.pending=function(){};goog.LoadController.prototype.registerEs6ModuleExports=function(path,exports,opt_closureNamespace){};goog.LoadController.prototype.setModuleState=
function(type){};goog.LoadController.prototype.clearModuleState=function(){};goog.LoadController.prototype.defer=function(callback){};goog.LoadController.prototype.areDepsLoaded=function(){};goog.Dependency=function(path,relativePath,provides,requires,loadFlags){this.path=path;this.relativePath=relativePath;this.provides=provides;this.requires=requires;this.loadFlags=loadFlags;this.loaded_=false;this.loadCallbacks_=[]};goog.Dependency.prototype.getPathName=function(){var pathName=this.path;var protocolIndex=
pathName.indexOf("://");if(protocolIndex>=0){pathName=pathName.substring(protocolIndex+3);var slashIndex=pathName.indexOf("/");if(slashIndex>=0)pathName=pathName.substring(slashIndex+1)}return pathName};goog.Dependency.prototype.onLoad=function(callback){if(this.loaded_)callback();else this.loadCallbacks_.push(callback)};goog.Dependency.prototype.loaded=function(){this.loaded_=true;var callbacks=this.loadCallbacks_;this.loadCallbacks_=[];for(var i=0;i<callbacks.length;i++)callbacks[i]()};goog.Dependency.defer_=
false;goog.Dependency.callbackMap_={};goog.Dependency.registerCallback_=function(callback){var key=Math.random().toString(32);goog.Dependency.callbackMap_[key]=callback;return key};goog.Dependency.unregisterCallback_=function(key){delete goog.Dependency.callbackMap_[key]};goog.Dependency.callback_=function(key,var_args){if(key in goog.Dependency.callbackMap_){var callback=goog.Dependency.callbackMap_[key];var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);callback.apply(undefined,
args)}else{var errorMessage="Callback key "+key+" does not exist (was base.js loaded more than once?).";throw Error(errorMessage);}};goog.Dependency.prototype.load=function(controller){if(goog.global.CLOSURE_IMPORT_SCRIPT){if(goog.global.CLOSURE_IMPORT_SCRIPT(this.path))controller.loaded();else controller.pause();return}if(!goog.inHtmlDocument_()){goog.logToConsole_("Cannot use default debug loader outside of HTML documents.");if(this.relativePath=="deps.js"){goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, "+
"or setting CLOSURE_NO_DEPS to true.");controller.loaded()}else controller.pause();return}var doc=goog.global.document;if(doc.readyState=="complete"&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){var isDeps=/\bdeps.js$/.test(this.path);if(isDeps){controller.loaded();return}else throw Error('Cannot write "'+this.path+'" after document load');}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var key=goog.Dependency.registerCallback_(function(script){if(!goog.DebugLoader_.IS_OLD_IE_||
script.readyState=="complete"){goog.Dependency.unregisterCallback_(key);controller.loaded()}});var nonceAttr=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";var event=goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload";var defer=goog.Dependency.defer_?"defer":"";var script='<script src="'+this.path+'" '+event+"=\"goog.Dependency.callback_('"+key+'\', this)" type="text/javascript" '+defer+nonceAttr+"><"+"/script>";doc.write(goog.TRUSTED_TYPES_POLICY_?
goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}else{var scriptEl=doc.createElement("script");scriptEl.defer=goog.Dependency.defer_;scriptEl.async=false;scriptEl.type="text/javascript";var nonce=goog.getScriptNonce();if(nonce)scriptEl.setAttribute("nonce",nonce);if(goog.DebugLoader_.IS_OLD_IE_){controller.pause();scriptEl.onreadystatechange=function(){if(scriptEl.readyState=="loaded"||scriptEl.readyState=="complete"){controller.loaded();controller.resume()}}}else scriptEl.onload=function(){scriptEl.onload=
null;controller.loaded()};scriptEl.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;doc.head.appendChild(scriptEl)}};goog.Es6ModuleDependency=function(path,relativePath,provides,requires,loadFlags){goog.Es6ModuleDependency.base(this,"constructor",path,relativePath,provides,requires,loadFlags)};goog.inherits(goog.Es6ModuleDependency,goog.Dependency);goog.Es6ModuleDependency.prototype.load=function(controller){if(goog.global.CLOSURE_IMPORT_SCRIPT){if(goog.global.CLOSURE_IMPORT_SCRIPT(this.path))controller.loaded();
else controller.pause();return}if(!goog.inHtmlDocument_()){goog.logToConsole_("Cannot use default debug loader outside of HTML documents.");controller.pause();return}var doc=goog.global.document;var dep=this;function write(src,contents){if(contents){var script='<script type="module" crossorigin>'+contents+"</"+"script>";doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}else{var script='<script type="module" crossorigin src="'+src+'"></'+"script>";doc.write(goog.TRUSTED_TYPES_POLICY_?
goog.TRUSTED_TYPES_POLICY_.createHTML(script):script)}}function append(src,contents){var scriptEl=doc.createElement("script");scriptEl.defer=true;scriptEl.async=false;scriptEl.type="module";scriptEl.setAttribute("crossorigin",true);var nonce=goog.getScriptNonce();if(nonce)scriptEl.setAttribute("nonce",nonce);if(contents)scriptEl.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(contents):contents;else scriptEl.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(src):
src;doc.head.appendChild(scriptEl)}var create;if(goog.isDocumentLoading_()){create=write;goog.Dependency.defer_=true}else create=append;var beforeKey=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(beforeKey);controller.setModuleState(goog.ModuleType.ES6)});create(undefined,'goog.Dependency.callback_("'+beforeKey+'")');create(this.path,undefined);var registerKey=goog.Dependency.registerCallback_(function(exports){goog.Dependency.unregisterCallback_(registerKey);controller.registerEs6ModuleExports(dep.path,
exports,goog.moduleLoaderState_.moduleName)});create(undefined,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+registerKey+'", m)');var afterKey=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(afterKey);controller.clearModuleState();controller.loaded()});create(undefined,'goog.Dependency.callback_("'+afterKey+'")')};goog.TransformedDependency=function(path,relativePath,provides,requires,loadFlags){goog.TransformedDependency.base(this,"constructor",
path,relativePath,provides,requires,loadFlags);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))};goog.inherits(goog.TransformedDependency,goog.Dependency);goog.TransformedDependency.prototype.load=function(controller){var dep=this;function fetch(){dep.contents_=goog.loadFileSync_(dep.path);if(dep.contents_){dep.contents_=dep.transform(dep.contents_);if(dep.contents_)dep.contents_+="\n//# sourceURL="+dep.path}}if(goog.global.CLOSURE_IMPORT_SCRIPT){fetch();
if(this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)){this.contents_=null;controller.loaded()}else controller.pause();return}var isEs6=this.loadFlags["module"]==goog.ModuleType.ES6;if(!this.lazyFetch_)fetch();function load(){if(dep.lazyFetch_)fetch();if(!dep.contents_)return;if(isEs6)controller.setModuleState(goog.ModuleType.ES6);var namespace;try{var contents=dep.contents_;dep.contents_=null;goog.globalEval(contents);if(isEs6)namespace=goog.moduleLoaderState_.moduleName}finally{if(isEs6)controller.clearModuleState()}if(isEs6)goog.global["$jscomp"]["require"]["ensure"]([dep.getPathName()],
function(){controller.registerEs6ModuleExports(dep.path,goog.global["$jscomp"]["require"](dep.getPathName()),namespace)});controller.loaded()}function fetchInOwnScriptThenLoad(){var doc=goog.global.document;var key=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(key);load()});var script='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+key+'");')+"</"+"script>";doc.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(script):
script)}var anythingElsePending=controller.pending().length>1;var useOldIeWorkAround=anythingElsePending&&goog.DebugLoader_.IS_OLD_IE_;var needsAsyncLoading=goog.Dependency.defer_&&(anythingElsePending||goog.isDocumentLoading_());if(useOldIeWorkAround||needsAsyncLoading){controller.defer(function(){load()});return}var doc=goog.global.document;var isInternetExplorer=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global;if(isEs6&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!isInternetExplorer){goog.Dependency.defer_=
true;controller.pause();var oldCallback=doc.onreadystatechange;doc.onreadystatechange=function(){if(doc.readyState=="interactive"){doc.onreadystatechange=oldCallback;load();controller.resume()}if(goog.isFunction(oldCallback))oldCallback.apply(undefined,arguments)}}else if(goog.DebugLoader_.IS_OLD_IE_||!goog.inHtmlDocument_()||!goog.isDocumentLoading_())load();else fetchInOwnScriptThenLoad()};goog.TransformedDependency.prototype.transform=function(contents){};goog.TranspiledDependency=function(path,
relativePath,provides,requires,loadFlags,transpiler){goog.TranspiledDependency.base(this,"constructor",path,relativePath,provides,requires,loadFlags);this.transpiler=transpiler};goog.inherits(goog.TranspiledDependency,goog.TransformedDependency);goog.TranspiledDependency.prototype.transform=function(contents){return this.transpiler.transpile(contents,this.getPathName())};goog.PreTranspiledEs6ModuleDependency=function(path,relativePath,provides,requires,loadFlags){goog.PreTranspiledEs6ModuleDependency.base(this,
"constructor",path,relativePath,provides,requires,loadFlags)};goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency);goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(contents){return contents};goog.GoogModuleDependency=function(path,relativePath,provides,requires,loadFlags,needsTranspile,transpiler){goog.GoogModuleDependency.base(this,"constructor",path,relativePath,provides,requires,loadFlags);this.needsTranspile_=needsTranspile;this.transpiler_=transpiler};
goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency);goog.GoogModuleDependency.prototype.transform=function(contents){if(this.needsTranspile_)contents=this.transpiler_.transpile(contents,this.getPathName());if(!goog.LOAD_MODULE_USING_EVAL||goog.global.JSON===undefined)return""+"goog.loadModule(function(exports) {"+'"use strict";'+contents+"\n"+";return exports"+"});"+"\n//# sourceURL="+this.path+"\n";else return""+"goog.loadModule("+goog.global.JSON.stringify(contents+"\n//# sourceURL="+
this.path+"\n")+");"};goog.DebugLoader_.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document["all"]);goog.DebugLoader_.prototype.addDependency=function(relPath,provides,requires,opt_loadFlags){provides=provides||[];relPath=relPath.replace(/\\/g,"/");var path=goog.normalizePath_(goog.basePath+relPath);if(!opt_loadFlags||typeof opt_loadFlags==="boolean")opt_loadFlags=opt_loadFlags?{"module":goog.ModuleType.GOOG}:{};var dep=this.factory_.createDependency(path,relPath,provides,
requires,opt_loadFlags,goog.transpiler_.needsTranspile(opt_loadFlags["lang"]||"es3",opt_loadFlags["module"]));this.dependencies_[path]=dep;for(var i=0;i<provides.length;i++)this.idToPath_[provides[i]]=path;this.idToPath_[relPath]=path};goog.DependencyFactory=function(transpiler){this.transpiler=transpiler};goog.DependencyFactory.prototype.createDependency=function(path,relativePath,provides,requires,loadFlags,needsTranspile){if(loadFlags["module"]==goog.ModuleType.GOOG)return new goog.GoogModuleDependency(path,
relativePath,provides,requires,loadFlags,needsTranspile,this.transpiler);else if(needsTranspile)return new goog.TranspiledDependency(path,relativePath,provides,requires,loadFlags,this.transpiler);else if(loadFlags["module"]==goog.ModuleType.ES6)if(goog.TRANSPILE=="never"&&goog.ASSUME_ES_MODULES_TRANSPILED)return new goog.PreTranspiledEs6ModuleDependency(path,relativePath,provides,requires,loadFlags);else return new goog.Es6ModuleDependency(path,relativePath,provides,requires,loadFlags);else return new goog.Dependency(path,
relativePath,provides,requires,loadFlags)};goog.debugLoader_=new goog.DebugLoader_;goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()};goog.setDependencyFactory=function(factory){goog.debugLoader_.setDependencyFactory(factory)};goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;if(!goog.global.CLOSURE_NO_DEPS)goog.debugLoader_.loadClosureDeps();goog.bootstrap=function(namespaces,callback){goog.debugLoader_.bootstrap(namespaces,
callback)}}goog.TRUSTED_TYPES_POLICY_NAME=goog.define("goog.TRUSTED_TYPES_POLICY_NAME","goog");goog.identity_=function(s){return s};goog.createTrustedTypesPolicy=function(name){var policy=null;var policyFactory=goog.global.trustedTypes;if(!policyFactory||!policyFactory.createPolicy)return policy;try{policy=policyFactory.createPolicy(name,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return policy};/*
 Copyright 2012 Google Inc. All rights reserved. */
goog.loadModule(function(exports){"use strict";goog.module("dataLayerHelper.helper.DataLayerHelper");var $jscomp$destructuring$var0=goog.require("dataLayerHelper.logging");var LogLevel=$jscomp$destructuring$var0.LogLevel;var log=$jscomp$destructuring$var0.log;var $jscomp$destructuring$var1=goog.require("dataLayerHelper.helper.utils");var expandKeyValue=$jscomp$destructuring$var1.expandKeyValue;var isArray=$jscomp$destructuring$var1.isArray;var isString=$jscomp$destructuring$var1.isString;var isArguments=
$jscomp$destructuring$var1.isArguments;var merge=$jscomp$destructuring$var1.merge;var $jscomp$destructuring$var2=goog.require("dataLayerHelper.plain");var isPlainObject=$jscomp$destructuring$var2.isPlainObject;var type=$jscomp$destructuring$var2.type;var DataLayerOptions={};var DataLayerHelper=function(dataLayer,options,listenToPast){options=options===undefined?{}:options;listenToPast=listenToPast===undefined?false:listenToPast;if(typeof options==="function"){log("Legacy constructor was used. "+"See README for latest usage.",
LogLevel.WARNING);options={"listener":options,"listenToPast":listenToPast,"processNow":true,"commandProcessors":{}}}else options={"listener":options["listener"]||function(){},"listenToPast":options["listenToPast"]||false,"processNow":options["processNow"]===undefined?true:options["processNow"],"commandProcessors":options["commandProcessors"]||{}};this.dataLayer_=dataLayer;this.listener_=options["listener"];this.listenToPast_=options["listenToPast"];this.processed_=false;this.executingListener_=false;
this.model_={};this.unprocessed_=[];this.commandProcessors_=options["commandProcessors"];this.abstractModelInterface_=buildAbstractModelInterface_(this);if(options["processNow"])this.process()};DataLayerHelper.prototype.process=function(){if(this.processed_)log("Process has already been run. This method should only "+"run a single time to prepare the helper.",LogLevel.ERROR);this.processStates_(this.dataLayer_,!this.listenToPast_);this.registerProcessor("set",function(){var model=this;if(arguments.length===
1&&type(arguments[0])==="object")merge(arguments[0],model);else if(arguments.length===2&&type(arguments[0])==="string"){var obj=expandKeyValue(arguments[0],arguments[1]);merge(obj,model)}});this.processed_=true;var oldPush=this.dataLayer_.push;var that=this;this.dataLayer_.push=function(){var states=[].slice.call(arguments,0);var result=oldPush.apply(that.dataLayer_,states);that.processStates_(states);return result}};DataLayerHelper.prototype.get=function(key){var target=this.model_;var split=key.split(".");
for(var i=0;i<split.length;i++){if(target[split[i]]===undefined)return undefined;target=target[split[i]]}return target};DataLayerHelper.prototype.flatten=function(){this.dataLayer_.splice(0,this.dataLayer_.length);this.dataLayer_[0]={};merge(this.model_,this.dataLayer_[0])};DataLayerHelper.prototype.registerProcessor=function(name,processor){if(!(name in this.commandProcessors_))this.commandProcessors_[name]=[];this.commandProcessors_[name].push(processor)};DataLayerHelper.prototype.processArguments_=
function(args){var states=[];var name=args[0];if(this.commandProcessors_[name]){var length=this.commandProcessors_[name].length;for(var i=0;i<length;i++){var callback=this.commandProcessors_[name][i];states.push(callback.apply(this.abstractModelInterface_,[].slice.call(args,1)))}}return states};DataLayerHelper.prototype.processStates_=function(states,skipListener){skipListener=skipListener===undefined?false:skipListener;this.unprocessed_.push.apply(this.unprocessed_,states);while(this.executingListener_===
false&&this.unprocessed_.length>0){var update=this.unprocessed_.shift();if(isArray(update))processCommand_(update,this.model_);else if(isArguments(update)){var newStates=this.processArguments_(update);this.unprocessed_.push.apply(this.unprocessed_,newStates)}else if(typeof update=="function")try{update.call(this.abstractModelInterface_)}catch(e){log("An exception was thrown when running the method "+(update+", execution was skipped."),LogLevel.ERROR);log(e,LogLevel.ERROR)}else if(isPlainObject(update))for(var key in update)merge(expandKeyValue(key,
update[key]),this.model_);else continue;if(!skipListener){this.executingListener_=true;this.listener_(this.model_,update);this.executingListener_=false}}};window["DataLayerHelper"]=DataLayerHelper;function buildAbstractModelInterface_(dataLayerHelper){return{set:function(key,value){merge(expandKeyValue(key,value),dataLayerHelper.model_)},get:function(key){return dataLayerHelper.get(key)}}}function processCommand_(command,model){if(!isString(command[0]))log("Error processing command, no command was run. The first "+
"argument must be of type string, but was of type "+(typeof command[0]+".\nThe command run was "+command),LogLevel.WARNING);var path=command[0].split(".");var method=path.pop();var args=command.slice(1);var target=model;for(var i=0;i<path.length;i++){if(target[path[i]]===undefined){log("Error processing command, no command was run as the "+("object at "+path+" was undefined.\nThe command run was "+command),LogLevel.WARNING);return}target=target[path[i]]}try{target[method].apply(target,args)}catch(e){log("An exception was thrown by the method "+
(method+", so no command was run.\nThe method was called on the ")+("data layer object at the location "+path+"."),LogLevel.ERROR)}}exports=DataLayerHelper;return exports});goog.loadModule(function(exports){"use strict";goog.module("dataLayerHelper.helper.utils");var $jscomp$destructuring$var3=goog.require("dataLayerHelper.plain");var type=$jscomp$destructuring$var3.type;var hasOwn=$jscomp$destructuring$var3.hasOwn;var isPlainObject=$jscomp$destructuring$var3.isPlainObject;function expandKeyValue(key,value){var result={};var target=result;var split=key.split(".");for(var i=0;i<split.length-1;i++)target=target[split[i]]={};target[split[split.length-1]]=value;return result}
function isArray(value){return type(value)==="array"}function isArguments(value){return type(value)==="arguments"}function isString(value){return type(value)==="string"}function merge(from,to){var allowMerge=!from["_clear"];for(var property in from)if(hasOwn(from,property)){var fromProperty=from[property];if(isArray(fromProperty)&&allowMerge){if(!isArray(to[property]))to[property]=[];merge(fromProperty,to[property])}else if(isPlainObject(fromProperty)&&allowMerge){if(!isPlainObject(to[property]))to[property]=
{};merge(fromProperty,to[property])}else to[property]=fromProperty}delete to["_clear"]}exports={expandKeyValue:expandKeyValue,isArray:isArray,isString:isString,isArguments:isArguments,merge:merge};return exports});goog.loadModule(function(exports){"use strict";goog.module("dataLayerHelper.logging");var DLH_DEBUG=goog.define("DLH_DEBUG",false);var LogLevel={INFO:1,WARNING:2,ERROR:3};function log(toLog,logLevel){if(DLH_DEBUG)switch(logLevel){case LogLevel.INFO:console.log(toLog);break;case LogLevel.WARNING:console.warn(toLog);break;case LogLevel.ERROR:console.error(toLog);break;default:}}exports={LogLevel:LogLevel,log:log};return exports});/*
 jQuery v1.9.1 (c) 2005, 2012
 jQuery Foundation, Inc. jquery.org/license.
*/
goog.loadModule(function(exports){"use strict";goog.module("dataLayerHelper.plain");var TYPE_RE_=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\]/;function type(value){if(value==null)return String(value);var match=TYPE_RE_.exec(Object.prototype.toString.call(Object(value)));if(match)return match[1].toLowerCase();return"object"}function hasOwn(value,key){return Object.prototype.hasOwnProperty.call(Object(value),key)}function isPlainObject(value){if(!value||type(value)!="object"||
value.nodeType||value==value.window)return false;try{if(value.constructor&&!hasOwn(value,"constructor")&&!hasOwn(value.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}var key;for(key in value);return key===undefined||hasOwn(value,key)}exports={type:type,hasOwn:hasOwn,isPlainObject:isPlainObject};return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.config.configProcessors");var GoogleAnalyticsEventProcessor=goog.require("measurementLibrary.eventProcessor.GoogleAnalyticsEventProcessor");var $jscomp$destructuring$var4=goog.require("measurementLibrary.logging");var LogLevel=$jscomp$destructuring$var4.LogLevel;var log=$jscomp$destructuring$var4.log;var DataLayerHelper=goog.require("dataLayerHelper.helper.DataLayerHelper");var StorageConstructor;var ProcessorConstructor;
var DEFAULT_STORAGE_INTERFACES={};var DEFAULT_EVENT_PROCESSORS={"googleAnalytics":GoogleAnalyticsEventProcessor};function buildStorage_(constructor,params){if(typeof constructor==="string"){if(!(constructor in DEFAULT_STORAGE_INTERFACES))log("No storage interface with name "+constructor+" found.",LogLevel.ERROR);constructor=DEFAULT_STORAGE_INTERFACES[constructor]}try{return new constructor(params)}catch(err){log("Could not construct a new instance of the class "+(constructor+" with parameter"),LogLevel.ERROR);
log(params,LogLevel.ERROR);log(err,LogLevel.ERROR);return null}}function buildProcessor_(constructor,params){if(typeof constructor==="string"){if(!(constructor in DEFAULT_EVENT_PROCESSORS))log("No event processor with name "+constructor+" found.",LogLevel.ERROR);constructor=DEFAULT_EVENT_PROCESSORS[constructor]}try{return new constructor(params)}catch(err){log("Could not construct a new instance of the class "+(constructor+" with parameter"),LogLevel.ERROR);log(params,LogLevel.ERROR);log(err,LogLevel.ERROR);
return null}}function configProcessors(helper,eventProcessor,eventOptions,storageInterface,storageOptions){var processor=buildProcessor_(eventProcessor,eventOptions);var storage=buildStorage_(storageInterface,storageOptions);if(!processor||!storage)return;registerEventAndSet_(helper,processor,storage,eventOptions)}function registerEventAndSet_(helper,processor,storage,eventOptions){function processSet(key,value,secondsToLive){if(secondsToLive===undefined)secondsToLive=processor.persistTime(key,value);
if(secondsToLive)if(secondsToLive===-1)storage.save(key,value);else storage.save(key,value,secondsToLive)}function processEvent(name,options){var merge=function(args){var result={};for(var i=0;i<arguments.length;i++){var toMerge=arguments[i];for(var prop in toMerge)if(toMerge.hasOwnProperty(prop))result[prop]=toMerge[prop]}return result};var getExtraOptions=function(object){if(object&&object.hasOwnProperty("getName"))return helper.get(object.getName());return{}};var model=this;if(!options)options=
{};options=merge(getExtraOptions(processor),eventOptions,options);processor.processEvent(storage,model,name,options)}helper.registerProcessor("event",processEvent);helper.registerProcessor("set",processSet)}exports={configProcessors:configProcessors,buildProcessor_:buildProcessor_,buildStorage_:buildStorage_,registerEventAndSet_:registerEventAndSet_};return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.config.setup");var $jscomp$destructuring$var5=goog.require("measurementLibrary.config.configProcessors");var configProcessors=$jscomp$destructuring$var5.configProcessors;var DataLayerHelper=goog.require("dataLayerHelper.helper.DataLayerHelper");function setupMeasure(dataLayer){var helper=new DataLayerHelper(dataLayer,{"processNow":false});helper.registerProcessor("config",function(eventProcessor,eventOptions,storageProcessor,
storageOptions){return configProcessors(helper,eventProcessor,eventOptions,storageProcessor,storageOptions)});helper.process()}exports=setupMeasure;return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.eventProcessor.GoogleAnalyticsEventProcessor");var uniqueId=goog.require("measurementLibrary.eventProcessor.generateUniqueId");var logging=goog.require("measurementLibrary.logging");var TOP_LEVEL_PARAMS={"client_id":true,"user_id":true,"timestamp_micros":true,"user_properties":true,"non_personalized_ads":true};var DEFAULT_CLIENT_ID_EXPIRES=2*365*24*60*60;function getDefaultMeasurementUrl(){return logging.DEBUG?"https://www.google-analytics.com/debug/mp/collect":
"https://www.google-analytics.com/mp/collect"}var GoogleAnalyticsEventProcessor=function($jscomp$destructuring$var6){var $jscomp$destructuring$var7=$jscomp$destructuring$var6===undefined?{}:$jscomp$destructuring$var6;var apiSecret=$jscomp$destructuring$var7["api_secret"];var measurementId=$jscomp$destructuring$var7["measurement_id"];var measurementUrl=$jscomp$destructuring$var7["measurement_url"];var clientIdExpires=$jscomp$destructuring$var7["client_id_expires"];var userAutomaticParams=$jscomp$destructuring$var7["automatic_params"];
if(apiSecret!==undefined&&typeof apiSecret!=="string"){logging.log("Provided API Secret is not a valid string.",logging.LogLevel.ERROR);apiSecret=undefined}if(measurementId!==undefined&&typeof measurementId!=="string"){logging.log("Provided Measurement ID is not a valid string.",logging.LogLevel.ERROR);measurementId=undefined}if(typeof measurementUrl!=="string"){if(measurementUrl!==undefined)logging.log("Provided Measurement URL is not a valid string. "+"Using default URL instead.",logging.LogLevel.ERROR);
measurementUrl=getDefaultMeasurementUrl();if(measurementId===undefined||apiSecret===undefined)logging.log("Sending events to Google Analytics without measurement ID or "+"API secret will lead to events being dropped.",logging.LogLevel.ERROR)}if(isNaN(Number(clientIdExpires))){if(clientIdExpires!==undefined)logging.log("Provided Client ID Expires is not a valid number. "+"Using default value instead.",logging.LogLevel.ERROR);clientIdExpires=DEFAULT_CLIENT_ID_EXPIRES}else clientIdExpires=Number(clientIdExpires);
if(Object.prototype.toString.call(userAutomaticParams)!=="[object Array]"){if(userAutomaticParams!==undefined)logging.log("Provided Automatic Parameters are not contained within an array "+"Discarding provided value.",logging.LogLevel.ERROR);userAutomaticParams=[]}this.automaticParams_={"page_path":true,"page_location":true,"page_title":true,"user_id":true,"client_id":true};for(var i=0;i<userAutomaticParams.length;++i)this.automaticParams_[userAutomaticParams[i]]=true;this.apiSecret_=apiSecret;this.measurementId_=
measurementId;this.measurementUrl_=measurementUrl;this.clientIdExpires_=clientIdExpires};GoogleAnalyticsEventProcessor.prototype.getName=function(){return"googleAnalytics"};GoogleAnalyticsEventProcessor.prototype.getFromGlobalScope_=function(key,modelInterface){if(this.automaticParams_[key])return modelInterface.get(key);return undefined};GoogleAnalyticsEventProcessor.prototype.getClientId_=function(storageInterface,modelInterface){var clientId=this.getFromGlobalScope_("client_id",modelInterface);
if(!clientId||typeof clientId!=="string"){clientId=storageInterface.load("client_id");if(!clientId||typeof clientId!=="string")clientId=uniqueId.generateUniqueId();storageInterface.save("client_id",clientId,this.clientIdExpires_);modelInterface.set("client_id",clientId)}return clientId};GoogleAnalyticsEventProcessor.prototype.buildRequestUrl_=function(){var paramsArray=[];if(this.measurementId_)paramsArray.push("measurement_id="+encodeURIComponent(this.measurementId_));if(this.apiSecret_)paramsArray.push("api_secret="+
encodeURIComponent(this.apiSecret_));if(paramsArray.length>0){var params=paramsArray.join("&");return this.measurementUrl_+"?"+params}return this.measurementUrl_};GoogleAnalyticsEventProcessor.prototype.addKeyValuePairToJson_=function(json,key,value){if(value!==undefined)if(TOP_LEVEL_PARAMS[key])json[key]=value;else if(!TOP_LEVEL_PARAMS[key])json.events[0].params[key]=value};GoogleAnalyticsEventProcessor.prototype.processEvent=function(storageInterface,modelInterface,eventName,eventOptions){var xhr=
new XMLHttpRequest;xhr.open("POST",this.buildRequestUrl_());var json={events:[{"name":eventName,"params":{}}]};for(var key in this.automaticParams_){var value=undefined;if(key==="client_id")value=this.getClientId_(storageInterface,modelInterface);else value=this.getFromGlobalScope_(key,modelInterface);this.addKeyValuePairToJson_(json,key,value)}for(var key$0 in eventOptions)this.addKeyValuePairToJson_(json,key$0,eventOptions[key$0]);if(logging.DEBUG)xhr.onload=function(){logging.log(xhr.responseText,
logging.LogLevel.INFO)};xhr.send(JSON.stringify(json))};GoogleAnalyticsEventProcessor.prototype.persistTime=function(key,value){if(key==="client_id")return this.clientIdExpires_;else return-1};exports=GoogleAnalyticsEventProcessor;return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.eventProcessor.generateUniqueId");function useCryptoRandomValues(){var getRandomValues;if(window.crypto)getRandomValues=window.crypto.getRandomValues.bind(crypto);else if(window.msCrypto)getRandomValues=window.msCrypto.getRandomValues.bind(window.msCrypto);return getRandomValues}function generateUniqueId(randomNumberGenerator){randomNumberGenerator=randomNumberGenerator===undefined?useCryptoRandomValues():randomNumberGenerator;
var uint32;if(randomNumberGenerator)uint32=randomNumberGenerator(new Uint32Array(1))[0];else uint32=Math.random()*4294967295>>>0;var timestamp=Math.floor((new Date).getTime()/1E3);return uint32+"."+timestamp}exports={generateUniqueId:generateUniqueId};return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.logging");var DEBUG=goog.define("ML_DEBUG",false);var LogLevel={INFO:1,WARNING:2,ERROR:3};function log(toLog,logLevel){if(DEBUG)switch(logLevel){case LogLevel.INFO:console.log(toLog);break;case LogLevel.WARNING:console.warn(toLog);break;case LogLevel.ERROR:console.error(toLog);break;default:}}exports={DEBUG:DEBUG,LogLevel:LogLevel,log:log};return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.storage.CookiesStorage");var CookiesStorage=function(settings){this.settings_=settings;this.setDefaults_()};CookiesStorage.prototype.setDefaults_=function(){if(!this.settings_["domain"])this.settings_["domain"]=this.findAutoDomain_(document);if(this.settings_["expires"]==undefined){var defaultTime=28*24*60*60;this.settings_["expires"]=defaultTime}if(!this.settings_["prefix"]){var defaultPrefix="ml_";this.settings_["prefix"]=
defaultPrefix}if(!this.settings_["update"]){var defaultUpdate=true;this.settings_["update"]=defaultUpdate}if(!this.settings_["flags"]){var defaultFlags="";this.settings_["flags"]=defaultFlags}};CookiesStorage.prototype.findAutoDomain_=function(document){var oldCookies=document.cookie;var domainArray=document.domain.split(".");var domain=domainArray.pop();var newCookie="registrable_domain="+domain+";domain="+domain;document.cookie=newCookie;while(document.cookie===oldCookies&&domainArray.length>0){domain=
domainArray.pop()+"."+domain;var newCookie$1="registrable_domain="+domain+";domain="+domain;document.cookie=newCookie$1}if(document.cookie===oldCookies)return null;var pastDate="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="registrable_domain=;domain="+domain+";expires="+pastDate;return domain};CookiesStorage.prototype.save=function(key,value,secondsToLive){};CookiesStorage.prototype.load=function(key,defaultValue){};exports=CookiesStorage;return exports});goog.loadModule(function(exports){"use strict";goog.module("measurementLibrary.main");var setupMeasure=goog.require("measurementLibrary.config.setup");window["dataLayer"]=window["dataLayer"]||[];setupMeasure(window["dataLayer"]);return exports});})();
